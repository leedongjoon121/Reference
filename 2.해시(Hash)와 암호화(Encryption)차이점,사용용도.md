# 해시(Hash)와 암호화(Encryption)차이점, 사용 용도

## 해시(Hash)와 암호화(Encryption)의 차이점은 ?
```
둘다 암호화 기법이지만, Hash는 단방향 암호화 기법이고, Encryption은 양방향 암호화 기법
Hash => 평문을 암호화된 문장(텍스트)로 만듬  (단뱡향)
Encryption => 평문을 암호화된 문장(텍스트)  +  암호화된 문장을 다시 평문으로 복호화 하는 기능 (양방향)
```
### 해시(Hash)
- 해시 함수는 임의의 길이의 데이터를 고정된 길이의 데이터로 매핑하는 함수이다. 
- 평문의 "ehdwns"을 해시함수(해시 알고리즘)을 이용하여 고정된 길이의 암호화 된 문자열로 바꾸어 버리는 것
- 해시의 대표적인 종류 : MD5, SHA 계역 해시 함수가 있고 비암호적 해시함수로는 CRC32등이 있음

### 해시(Hash) 참고사항

- 해시 알고리즘 및 암호화 알고리즘은 종류가 다양하며, 알고리즘은 모두에게(해커에게도)공개되어 있다.
  (따라서, 많은 개발자들이 검증된 것들을 사용한다.)
- 해시 알고리즘마다 Hash 길이가 다르고 이미 보안이 뚫린 해시 함수가 존재한다.
- 해시 알고리즘은 특정 입력에 대해 항상 같은 값을 리턴한다.
  (이 점을 통해 '인증'이 가능하다. 어떤 특정 값을 입력하여 해시 함수를 거쳐 나온 결과값이 같다면, 입력된 값이 같다는게 입증)
- 해시된 값은 입력이 다른 값이지만 같을 수 있다.
  (입력값은 만들어낼 수 있는 평문이 길이 제한이 없다면 무한정으로 만들어 낼 수 있지만. 해시된 값은 항상 고정된 길이의 값으로 나타내므로 한계가 있어서, 다른 입력이지만 해시된 값이 같은 경우가 나타날 수도 있다, 중복이 적을 수록 좋은 해시 함수)

### 해시함수를 이용한다고 해서 보안이 완벽에 가깝다고 할 수 없다.
- 해커가 무차별적으로 임의의 값을 입력하면서 비밀번호를 알아낼 수 있기 때문 => 이를 보완하기 위해 비밀번호에 솔트(salt)값을 넣는 방법이 있고, 해시함수를 여러번 돌리는 방법이 있다.

```
비밀번호 => 개개인 마다 다른 임의의 솔트값을 데이터베이스에 같이 저장하여 해시함수를 적용할 때 솔트값을 이용하는 것으로, 비밀번호를 암호화 시키는 방법
(솔트값을 넣는 방법은 다양함, 비밀번호 양쪽 or 한쪽에 넣고 해시함수를 수행한 다음 다시 솔트값을 넣고 수행하는 방식 등 )

따라서 해커가 솔트값을 알아차려도 한명정도의 개인정보를 알아갈 뿐, 다량의 유출 사례가 발생하지 않는다.
```

그러나, 해시함수는 태생이 암호화를 위해서가 아니라 검색을 빨리하기 위한 것이라 속도가 굉장히 빠르다.

그렇기 때문에 요즘 나오는 고성능의 GPU등을 이용하여 무차별적으로 대입해보기를 시도하면 1초에 약 50억번 이상 대입이 가능하기 때문에 대입하다보면 뚫릴수 있다. 

따라서 이런 점을 보완해야하는데 이럴때 해시함수를 여러번 돌리면서 강제적으로 1회 대입에 걸리는 시간을 높이는 방법을 이용하는 것 

사람은 로그인에 걸리는 시간(대입에 걸리는 시간)이 0.2초가 걸리더라도 느리다고 여기지 않는다.

이 점을 이용하여 1회에 약 0.2초가 걸리게 강제적으로 만든다면 무차별 대입을 50억번 할 경우 ... 어마어마한 시간이 걸리기 때문에 해커들이 시도하기 어렵다.

<hr/>

결국 좋은 해시함수와 솔트를 이용하는 방법 + 해시 함수를 여러번 적용하는 방법을 이용하는 key derivation function가 존재

#### pbkdf2 : 솔트값과 해시함수의 반복횟수등을 지정할 수 있다.
#### bcrypt : 패스워드를 위해 탄생해서 아주 강력한 해시 알고리즘이 적용됨, 마찬가지로 검색해서 사용(Spring security에서 사용)

### 암호화(Encryption)
- 수학적 과정을 통해 어떤 정보를 의미 없는 문자의 나열로 바꾸는 것을 뜻함
- 대표적인 암호화 : RSA, DS, Caesar, enigma 등 

#### 암호화 키
1. 비밀키 : 송신자와 수신자 모두 동일한 암호화 키를 알고 있어야 한다. 암호문을 받은 수신자는 동일한 암호화 키 값을 역으로 대입해 역처리를 하여 암호문을 해독할 수 있다. 

2. 공개키 : 서로 다른 두개의 키, (공개키 + 개인키) 를 사용하여 암호화 하고 복호화 한다. 공개키로는 암호화를하며, 개인키로를 복호화를 한다. 
- 공개키는 말 그대로 공개키지만 개인키를 가진 사람 만이 공개키를 통해 암호화된 메시지를 해독할 수 있다.

### 해시와 암호화 차이점
``` 
해시와의 차이점은 해시는 해시된 값의 길이가 동일하지만, 공개키 암호화는 평문의 길이가 길어지면 암호화 된 길이도 길어진다. 
해시는 평문이 같으면 결과값도 같지만, 암호화는 평문의 내용이 같아도 키값이 다르다면 전혀 다른 암호화가 된다.
```


